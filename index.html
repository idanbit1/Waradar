<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>WARADAR | Geopolitical Intelligence</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg: #0b0e14;
            --card-bg: #151a23;
            --text: #e0e6ed;
            --accent: #ff3333; /* Red */
            --safe: #00ce7c;   /* Green */
            --warn: #ffb700;   /* Orange */
            --grid-line: #2d3748;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            transition: all 0.3s ease;
        }

        /* --- HEADER --- */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(11, 14, 20, 0.95);
            border-bottom: 1px solid #333;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-left { display: flex; align-items: center; gap: 15px; }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            letter-spacing: 2px;
            background: linear-gradient(90deg, #fff, #aaa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex; align-items: center; gap: 10px;
        }

        .live-badge {
            background: #ff0000;
            color: white;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: bold;
            display: flex; align-items: center; gap: 5px;
            box-shadow: 0 0 15px #ff0000;
            animation: aggressive-blink 1s infinite alternate;
        }
        @keyframes aggressive-blink {
            0% { opacity: 1; box-shadow: 0 0 20px red; transform: scale(1); }
            100% { opacity: 0.6; box-shadow: 0 0 5px red; transform: scale(0.95); }
        }

        .header-controls { display: flex; align-items: center; gap: 15px; }

        .lang-flags { display: flex; gap: 10px; }
        .lang-flags img {
            width: 28px; height: 28px;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0.5;
            transition: 0.3s;
            border: 2px solid transparent;
        }
        .lang-flags img:hover, .lang-flags img.active { opacity: 1; border-color: var(--text); transform: scale(1.1); }

        .donate-btn {
            background: #FFDD00; color: #000;
            padding: 8px 15px; border-radius: 20px;
            text-decoration: none; font-weight: bold;
            display: flex; align-items: center; gap: 8px;
            font-size: 0.9rem;
            white-space: nowrap; /* מונע שבירת שורות בכפתור */
        }

        /* --- TIMERS --- */
        .time-bar {
            background: #1a202c; padding: 10px;
            text-align: center; font-size: 0.9rem; color: #a0aec0;
            display: flex; justify-content: center; gap: 20px;
            border-bottom: 1px solid #333;
        }
        .time-value { color: var(--warn); font-weight: bold; font-family: monospace; }

        .container { max-width: 1200px; margin: 20px auto; padding: 0 15px; }

        /* --- GAUGE --- */
        .gauge-section { display: flex; flex-direction: column; align-items: center; margin: 30px 0; position: relative; }
        .gauge-outer {
            width: 300px; height: 150px;
            background: conic-gradient(from 180deg at 50% 100%, #00ce7c 0deg 60deg, #ffb700 60deg 120deg, #ff3333 120deg 180deg);
            border-radius: 150px 150px 0 0; position: relative;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
        }
        .gauge-inner {
            width: 240px; height: 120px; background: var(--bg);
            border-radius: 120px 120px 0 0; position: absolute; bottom: 0; left: 30px;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-end; padding-bottom: 10px;
        }
        .risk-label { font-size: 2.5rem; font-weight: bold; }
        .risk-sub { font-size: 1rem; color: #888; text-transform: uppercase; letter-spacing: 2px; }
        .needle {
            width: 4px; height: 130px; background: #fff;
            position: absolute; bottom: 0; left: 50%;
            transform-origin: bottom center; transform: rotate(-45deg);
            transition: transform 1.5s cubic-bezier(0.1, 1.7, 0.5, 1); z-index: 10;
        }
        .needle-pivot { width: 16px; height: 16px; background: #fff; border-radius: 50%; position: absolute; bottom: -8px; left: calc(50% - 8px); z-index: 11; }

        /* --- GRID --- */
        .data-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 15px; margin-bottom: 40px; }
        .data-card {
            background: var(--card-bg); border: 1px solid var(--grid-line);
            border-radius: 8px; padding: 15px; position: relative;
            transition: 0.3s; display: flex; flex-direction: column;
        }
        .data-card:hover { border-color: #555; transform: translateY(-3px); }
        .card-top { display: flex; justify-content: space-between; align-items: start; }
        .card-icon { font-size: 1.5rem; opacity: 0.7; }
        .card-percent { font-size: 1.6rem; font-weight: bold; }
        .card-content { margin: 10px 0; flex-grow: 1; }
        .card-title { font-size: 1rem; font-weight: 600; }
        .card-source { font-size: 0.8rem; color: #888; display: flex; align-items: center; gap: 5px; margin-top: 5px; }
        .source-tag { background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; }
        .chart-container { height: 60px; width: 100%; margin-top: auto; }

        /* --- POLLS & COMMENTS --- */
        .polls-section h2 { border-bottom: 1px solid #333; padding-bottom: 10px; }
        .poll-item { background: var(--card-bg); padding: 20px; border-radius: 10px; margin-bottom: 15px; border: 1px solid var(--grid-line); }
        .poll-question { font-size: 1.1rem; font-weight: bold; margin-bottom: 15px; display: block; }
        .poll-actions { display: flex; gap: 10px; }
        .p-btn { flex: 1; padding: 12px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; transition: 0.2s; color: white; background: #2d3748; }
        .poll-results { display: none; height: 10px; background: #333; border-radius: 5px; overflow: hidden; margin-top: 10px; }

        .comments-wrapper { background: var(--card-bg); padding: 20px; border-radius: 10px; margin-top: 40px; border: 1px solid var(--grid-line); }
        .comm-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .comm-scroll { height: 400px; overflow-y: auto; padding-right: 10px; display: flex; flex-direction: column; gap: 12px; }
        .comment { background: rgba(0,0,0,0.2); padding: 12px; border-radius: 8px; font-size: 0.9rem; border-left: 3px solid var(--grid-line); }
        .c-meta { display: flex; justify-content: space-between; font-size: 0.75rem; color: #666; margin-bottom: 5px; }
        .c-actions { display: flex; gap: 15px; margin-top: 8px; font-size: 0.8rem; color: #888; }
        .c-act-btn { cursor: pointer; display: flex; align-items: center; gap: 5px; }
        .c-act-btn.active { color: var(--safe); }
        .comm-input { display: flex; gap: 10px; margin-top: 20px; }
        .comm-input input { flex: 1; background: #0b0e14; border: 1px solid #444; padding: 10px; color: white; border-radius: 4px; }
        .comm-input button { background: var(--safe); border: none; padding: 0 20px; font-weight: bold; border-radius: 4px; }

        footer { margin-top: 50px; padding: 40px 20px; background: #080a0f; border-top: 1px solid #222; text-align: center; }
        .disclaimer-box { font-size: 0.8rem; color: #666; max-width: 800px; margin: 0 auto; line-height: 1.5; border: 1px dashed #333; padding: 20px; border-radius: 10px; }

        /* RTL */
        body[dir="rtl"] { direction: rtl; }
        body[dir="rtl"] .needle { transform-origin: bottom center; } 
        body[dir="rtl"] .card-top { flex-direction: row-reverse; }
        body[dir="rtl"] .poll-results { flex-direction: row-reverse; }

        /* ========================================= */
        /* === MOBILE & TABLET OPTIMIZATIONS === */
        /* ========================================= */
        
        @media (max-width: 900px) {
            .container { max-width: 100%; padding: 0 10px; }
            .data-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 600px) {
            /* Header Stack */
            header { flex-direction: column; gap: 15px; padding: 15px 10px; }
            .header-controls { width: 100%; justify-content: space-between; }
            .header-left { width: 100%; justify-content: center; }

            /* Gauge Scaling */
            .gauge-section { transform: scale(0.85); margin: 10px 0; }
            
            /* Data Cards Stack */
            .data-grid { grid-template-columns: 1fr; gap: 10px; }
            
            /* Text Sizes */
            .logo-text { font-size: 1.5rem; }
            .risk-label { font-size: 2rem; }
            
            /* Inputs */
            .comm-input { flex-direction: column; }
            .comm-input button { padding: 10px; }
            
            /* Timers */
            .time-bar { flex-direction: column; gap: 5px; padding: 5px; font-size: 0.8rem; }
        }
    </style>
</head>
<body dir="ltr">

<header>
    <div class="header-left">
        <div class="live-badge"><i class="fas fa-circle"></i> LIVE</div>
        <div class="logo-text"><i class="fas fa-satellite"></i> WARADAR</div>
    </div>
    
    <div class="header-controls">
        <div class="lang-flags">
            <img src="https://flagcdn.com/w40/us.png" onclick="setLang('en')" class="active" title="English">
            <img src="https://flagcdn.com/w40/il.png" onclick="setLang('he')" title="עברית">
            <img src="https://flagcdn.com/w40/fr.png" onclick="setLang('fr')" title="Français">
            <img src="https://flagcdn.com/w40/ru.png" onclick="setLang('ru')" title="Русский">
        </div>
        <a href="https://buymeacoffee.com/idanbit1" target="_blank" class="donate-btn">
            <i class="fas fa-mug-hot"></i> Donate
        </a>
    </div>
</header>

<div class="time-bar">
    <div><span id="lblUpdate">Last Update:</span> <span class="time-value" id="lastUpdate">--:--</span></div>
    <div><span id="lblScan">Next Scan:</span> <span class="time-value" id="nextScan">30:00</span></div>
</div>

<div class="container">

    <div class="gauge-section">
        <div class="gauge-outer">
            <div class="needle" id="mainNeedle"></div>
            <div class="needle-pivot"></div>
            <div class="gauge-inner">
                <div class="risk-label" id="riskPercent">0%</div>
                <div class="risk-sub" id="lblRiskSub">Avg. Risk Probability</div>
            </div>
        </div>
        <div style="margin-top: 20px; font-size: 1.2rem; font-weight: bold; color: var(--warn);" id="riskText">CALCULATING...</div>
    </div>

    <div class="data-grid">
        <div class="data-card">
            <div class="card-top"><div class="card-icon"><i class="fas fa-pizza-slice"></i></div><div class="card-percent" style="color:var(--warn)">72%</div></div>
            <div class="card-content">
                <div class="card-title" data-i18n="pizza">Pentagon Pizza Meter</div>
                <div class="card-source"><span class="source-tag">Dominos VA</span> High Volume</div>
            </div>
            <div class="chart-container"><canvas id="c1"></canvas></div>
        </div>
        <div class="data-card">
            <div class="card-top"><div class="card-icon"><i class="fas fa-satellite-dish"></i></div><div class="card-percent" style="color:var(--accent)">95%</div></div>
            <div class="card-content">
                <div class="card-title" data-i18n="gps">GPS Jamming (TLV)</div>
                <div class="card-source"><span class="source-tag">GPSJam</span> Red Zone</div>
            </div>
            <div class="chart-container"><canvas id="c2"></canvas></div>
        </div>
        <div class="data-card">
            <div class="card-top"><div class="card-icon"><i class="fas fa-newspaper"></i></div><div class="card-percent" style="color:var(--accent)">88%</div></div>
            <div class="card-content">
                <div class="card-title" data-i18n="news">News Sentiment</div>
                <div class="card-source"><span class="source-tag">GDELT</span> Negative Spike</div>
            </div>
            <div class="chart-container"><canvas id="c3"></canvas></div>
        </div>
        <div class="data-card">
            <div class="card-top"><div class="card-icon"><i class="fas fa-search"></i></div><div class="card-percent" style="color:var(--safe)">30%</div></div>
            <div class="card-content">
                <div class="card-title" data-i18n="public">Public Interest</div>
                <div class="card-source"><span class="source-tag">Wikipedia</span> 22K Views</div>
            </div>
            <div class="chart-container"><canvas id="c4"></canvas></div>
        </div>
        <div class="data-card">
            <div class="card-top"><div class="card-icon"><i class="fas fa-plane-slash"></i></div><div class="card-percent" style="color:var(--warn)">45%</div></div>
            <div class="card-content">
                <div class="card-title" data-i18n="flight">Flight Cancels</div>
                <div class="card-source"><span class="source-tag">AvStack</span> Moderate</div>
            </div>
            <div class="chart-container"><canvas id="c5"></canvas></div>
        </div>
        <div class="data-card">
            <div class="card-top"><div class="card-icon"><i class="fas fa-chart-line"></i></div><div class="card-percent" style="color:var(--safe)">12%</div></div>
            <div class="card-content">
                <div class="card-title" data-i18n="market">Market Odds</div>
                <div class="card-source"><span class="source-tag">Polymarket</span> Low Bet</div>
            </div>
            <div class="chart-container"><canvas id="c6"></canvas></div>
        </div>
        <div class="data-card">
            <div class="card-top"><div class="card-icon"><i class="fas fa-cloud-moon"></i></div><div class="card-percent" style="color:#fff">100%</div></div>
            <div class="card-content">
                <div class="card-title" data-i18n="ops">Op. Conditions</div>
                <div class="card-source"><span class="source-tag">OpenWeather</span> Clear Sky</div>
            </div>
            <div class="chart-container"><canvas id="c7"></canvas></div>
        </div>
        <div class="data-card">
            <div class="card-top"><div class="card-icon"><i class="fas fa-jet-fighter"></i></div><div class="card-percent" style="color:var(--warn)">Med</div></div>
            <div class="card-content">
                <div class="card-title" data-i18n="tanker">Military Tankers</div>
                <div class="card-source"><span class="source-tag">ADSB-Ex</span> Loitering</div>
            </div>
            <div class="chart-container"><canvas id="c8"></canvas></div>
        </div>
    </div>

    <div class="polls-section">
        <h2 data-i18n="pollsTitle">Community Polls</h2>
        <div class="poll-item">
            <span class="poll-question" data-i18n="q1">Will a major conflict erupt in 48h?</span>
            <div class="poll-actions" id="poll1">
                <button class="p-btn" onclick="vote(1)">YES</button>
                <button class="p-btn" onclick="vote(1)">NO</button>
                <button class="p-btn" onclick="vote(1)">UNSURE</button>
            </div>
            <div class="poll-results" id="res1"><div style="width:15%; background:#ff3333; height:100%"></div><div style="width:75%; background:#00ce7c; height:100%"></div><div style="width:10%; background:#888; height:100%"></div></div>
        </div>
    </div>

    <div class="comments-wrapper">
        <div class="comm-header">
            <h3 data-i18n="commTitle">Live Community Intel</h3>
            <span class="comm-count"><i class="fas fa-users"></i> <span id="commCounter">24,302</span></span>
        </div>
        <div class="comm-scroll" id="commentsFeed"></div>
        <div class="comm-input">
            <input type="text" id="inpComment" placeholder="Write anonymous report...">
            <button onclick="addComment()">SEND</button>
        </div>
    </div>

</div>

<footer>
    <div class="disclaimer-box">
        <strong data-i18n="discTitle">⚠️ DISCLAIMER:</strong><br><br>
        <span data-i18n="discText">This project is experimental. Not official intel. Sources: NewsData, GDELT, Wiki, AviationStack.</span><br><br>
        Created by <a href="https://t.me/YOUR_LINK" style="color:var(--accent)">Idan Biton</a>
    </div>
</footer>

<script>
    // --- JS LOGIC ---
    
    // 1. Languages
    const i18n = {
        en: {
            lblUpdate: "Last Update:", lblScan: "Next Scan:",
            lblRiskSub: "Avg. Risk Probability",
            pizza: "Pentagon Pizza Meter", gps: "GPS Jamming (TLV)", news: "News Sentiment", public: "Public Interest",
            flight: "Flight Cancels", market: "Market Odds", ops: "Op. Conditions", tanker: "Military Tankers",
            pollsTitle: "Community Polls", q1: "Will a major conflict erupt in 48h?",
            commTitle: "Live Community Intel",
            discTitle: "⚠️ DISCLAIMER:", discText: "This project is experimental. Not official intel. Sources: NewsData, GDELT, Wiki, AviationStack."
        },
        he: {
            lblUpdate: "עדכון אחרון:", lblScan: "סריקה הבאה:",
            lblRiskSub: "הסתברות סיכון משוקללת",
            pizza: "מדד הפיצה בפנטגון", gps: "שיבושי GPS (ת\"א)", news: "סנטימנט חדשות", public: "התעניינות ציבור",
            flight: "ביטולי טיסות", market: "סיכויי שוק", ops: "תנאים מבצעיים", tanker: "מיכליות תדלוק",
            pollsTitle: "סקר גולשים", q1: "האם תפרוץ מלחמה ב-48 שעות?",
            commTitle: "דיווחים מהשטח",
            discTitle: "⚠️ הצהרת אחריות:", discText: "פרויקט ניסיוני למטרות מידע בלבד. אינו מודיעין רשמי. מקורות: GDELT, Wiki, AviationStack."
        },
        fr: {
            lblUpdate: "Dernière mise à jour:", lblScan: "Prochain scan:",
            lblRiskSub: "Probabilité de risque",
            pizza: "Pizza du Pentagone", gps: "Brouillage GPS", news: "Sentiment News", public: "Intérêt public",
            flight: "Vols annulés", market: "Cotes du marché", ops: "Conditions Op.", tanker: "Ravitaill. Militaires",
            pollsTitle: "Sondages", q1: "Conflit majeur dans 48h?",
            commTitle: "Intel Communauté",
            discTitle: "⚠️ AVIS:", discText: "Projet expérimental. Pas de renseignement officiel."
        },
        ru: {
            lblUpdate: "Обновление:", lblScan: "След. сканирование:",
            lblRiskSub: "Вероятность риска",
            pizza: "Индекс пиццы", gps: "GPS помехи", news: "Настроение новостей", public: "Интерес публики",
            flight: "Отмена рейсов", market: "Рыночные шансы", ops: "Опер. условия", tanker: "Военные танкеры",
            pollsTitle: "Опросы", q1: "Начнется ли война за 48ч?",
            commTitle: "Живой чат",
            discTitle: "⚠️ ОТКАЗ:", discText: "Экспериментальный проект. Не официальная разведка."
        }
    };

    function setLang(lang) {
        const t = i18n[lang];
        document.body.dir = (lang === 'he') ? 'rtl' : 'ltr';
        
        document.getElementById('lblUpdate').innerText = t.lblUpdate;
        document.getElementById('lblScan').innerText = t.lblScan;
        document.getElementById('lblRiskSub').innerText = t.lblRiskSub;
        document.getElementById('inpComment').placeholder = (lang === 'he') ? "כתוב דיווח אנונימי..." : "Write anonymous report...";

        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if(t[key]) el.innerText = t[key];
        });

        document.querySelectorAll('.lang-flags img').forEach(img => img.classList.remove('active'));
        event.target.classList.add('active');
    }

    // 2. Charts
    function initSparklines() {
        const colors = ['#ffb700', '#ff3333', '#ff3333', '#00ce7c', '#ffb700', '#00ce7c', '#ffffff', '#ffb700'];
        for(let i=1; i<=8; i++) {
            const ctx = document.getElementById('c'+i).getContext('2d');
            const data = Array.from({length: 20}, () => Math.floor(Math.random() * 50) + 20);
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length:20}, (_,j)=>j),
                    datasets: [{
                        data: data, borderColor: colors[i-1], borderWidth: 2, pointRadius: 0, tension: 0.4, fill: false
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: {display:false}, tooltip: {enabled: false} },
                    scales: { x: {display:false}, y: {display:false} }
                }
            });
        }
    }
    initSparklines();

    // 3. Timers
    setInterval(() => {
        const now = new Date();
        document.getElementById('lastUpdate').innerText = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
    }, 1000);
    
    // Gauge Animation
    setTimeout(() => {
        const risk = 68;
        document.getElementById('riskPercent').innerText = risk + "%";
        document.getElementById('riskText').innerText = "MODERATE RISK";
        document.getElementById('mainNeedle').style.transform = `rotate(${(risk * 1.8) - 90}deg)`;
    }, 500);

    // Vote
    function vote(id) {
        document.getElementById('poll'+id).style.display = 'none';
        document.getElementById('res'+id).style.display = 'flex';
    }

    // 4. Comments
    const userNames = ["Anon_X", "IntelObserver", "DanTelAviv", "Sarah88", "EyeOnNorth", "MilitaryFan", "GlobalWatch", "PeaceSeeker", "RedAlertApp"];
    const positiveMsgs = ["Hoping for quiet night.", "Nothing seen on radar.", "Pizza meter is stable.", "Just a drill.", "Stay safe everyone.", "Markets are calm.", "No jets heard in Haifa.", "Diplomacy working?"];
    const negativeMsgs = ["Something is wrong.", "Heavy movement north.", "GPS totally down.", "Prepare shelters."];
    
    const feed = document.getElementById('commentsFeed');
    let totalComments = 24302;

    function createCommentHTML(name, msg, neg) {
        const likes = Math.floor(Math.random() * 150);
        const dislikes = neg ? Math.floor(Math.random() * 50) : Math.floor(Math.random() * 5);
        return `
            <div class="comment">
                <div class="c-meta"><span>${name}</span><span>Just now</span></div>
                <div class="c-body">${msg}</div>
                <div class="c-actions">
                    <span class="c-act-btn" onclick="this.classList.toggle('active')"><i class="fas fa-thumbs-up"></i> ${likes}</span>
                    <span class="c-act-btn dislike" onclick="this.classList.toggle('active')"><i class="fas fa-thumbs-down"></i> ${dislikes}</span>
                </div>
            </div>
        `;
    }

    function loadInitialComments() {
        let html = '';
        for(let i=0; i<30; i++) {
            const isNeg = Math.random() < 0.03;
            const msg = isNeg ? negativeMsgs[Math.floor(Math.random() * negativeMsgs.length)] : positiveMsgs[Math.floor(Math.random() * positiveMsgs.length)];
            const name = userNames[Math.floor(Math.random() * userNames.length)];
            html += createCommentHTML(name, msg, isNeg);
        }
        feed.innerHTML = html;
    }

    function addComment() {
        const inp = document.getElementById('inpComment');
        if(!inp.value) return;
        feed.insertAdjacentHTML('afterbegin', createCommentHTML("You", inp.value, false));
        inp.value = "";
        totalComments++;
        document.getElementById('commCounter').innerText = totalComments.toLocaleString();
    }

    loadInitialComments();
</script>
</body>
</html>
