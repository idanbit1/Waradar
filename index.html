
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WARADAR | AI Intel</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            /* iOS Dark Mode Palette */
            --bg: #000000;
            --card: #1c1c1e;
            --text-primary: #ffffff;
            --text-secondary: #8e8e93;
            --accent-blue: #0a84ff;
            --accent-green: #30d158;
            --accent-red: #ff453a;
            --accent-orange: #ff9f0a;
            --accent-yellow: #ffd60a;
            --accent-purple: #bf5af2;
            --separator: #38383a;
        }

        body {
            background-color: var(--bg);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0; padding: 0;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            padding-bottom: 60px;
        }

        a { text-decoration: none; color: inherit; }

        /* --- HEADER --- */
        header {
            padding: 15px 20px;
            background: rgba(28, 28, 30, 0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            position: sticky; top: 0; z-index: 100;
            border-bottom: 1px solid var(--separator);
            display: flex; justify-content: space-between; align-items: center;
        }

        .app-title { font-size: 20px; font-weight: 800; letter-spacing: -0.5px; display: flex; align-items: center; gap: 8px; }
        .live-badge {
            font-size: 10px; font-weight: 700; color: var(--accent-red);
            display: flex; align-items: center; gap: 5px;
            background: rgba(255, 69, 58, 0.15); padding: 4px 8px; border-radius: 12px;
        }
        .dot { width: 6px; height: 6px; background-color: var(--accent-red); border-radius: 50%; animation: blink 1.5s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }

        .header-actions { display: flex; align-items: center; gap: 15px; }
        
        /* RESTORED LANGUAGE FLAGS */
        .lang-flags { display: flex; gap: 8px; }
        .lang-flags img { 
            width: 24px; height: 24px; border-radius: 50%; cursor: pointer; 
            opacity: 0.6; transition: 0.2s; border: 2px solid transparent;
        }
        .lang-flags img.active, .lang-flags img:hover { opacity: 1; border-color: var(--accent-blue); transform: scale(1.1); }

        .donate-btn {
            background: var(--accent-blue); color: white; padding: 6px 16px; border-radius: 20px;
            font-size: 13px; font-weight: 600; transition: transform 0.2s;
        }

        /* --- LAYOUT --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }

        /* --- HERO: RINGS --- */
        .hero-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 40px;
        }
        .hero-card {
            background: var(--card); border-radius: 24px; padding: 25px;
            display: flex; flex-direction: column; align-items: center;
            position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.4);
        }
        .ring-wrapper { width: 130px; height: 130px; position: relative; margin: 15px 0; }
        .ring-svg { transform: rotate(-90deg); width: 100%; height: 100%; }
        .ring-bg { fill: none; stroke: #2c2c2e; stroke-width: 10; }
        .ring-val { 
            fill: none; stroke-width: 10; stroke-linecap: round; 
            stroke-dasharray: 377; stroke-dashoffset: 377; transition: stroke-dashoffset 1.5s ease;
        }
        .ring-text {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 32px; font-weight: 700; letter-spacing: -1px;
        }
        .hero-label { font-size: 14px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; letter-spacing: 0.5px; }
        .hero-status { font-size: 16px; font-weight: 700; margin-top: 5px; }

        /* --- DATA WIDGETS --- */
        .section-title { font-size: 22px; font-weight: 700; margin-bottom: 15px; margin-left: 5px; display: flex; justify-content: space-between; align-items: center;}
        
        .widget-grid {
            display: grid; gap: 20px; grid-template-columns: repeat(4, 1fr);
        }

        .card {
            background: var(--card); border-radius: 22px; padding: 18px;
            display: flex; flex-direction: column; justify-content: space-between;
            height: 200px; position: relative; /* increased height for AI tag */
            transition: transform 0.2s; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            text-decoration: none; color: inherit;
        }
        .card:hover { transform: translateY(-3px); z-index: 10; }

        /* AI TOOLTIP STYLES */
        .ai-badge {
            font-size: 10px; font-weight: 700; color: var(--accent-purple);
            background: rgba(191, 90, 242, 0.15); padding: 4px 8px; border-radius: 8px;
            width: fit-content; margin-top: 8px; display: flex; align-items: center; gap: 4px;
            border: 1px solid rgba(191, 90, 242, 0.3);
        }
        
        /* The Popup */
        .ai-tooltip {
            position: absolute; bottom: 100%; left: 0; right: 0;
            background: rgba(20, 20, 22, 0.95); backdrop-filter: blur(20px);
            border: 1px solid var(--separator); border-radius: 16px;
            padding: 15px; margin-bottom: 10px;
            opacity: 0; visibility: hidden; transition: all 0.2s ease;
            pointer-events: none; box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            z-index: 100;
        }
        
        .card:hover .ai-tooltip { opacity: 1; visibility: visible; transform: translateY(-5px); }
        
        .ai-header { font-size: 11px; font-weight: 700; color: var(--accent-purple); text-transform: uppercase; margin-bottom: 5px; }
        .ai-text { font-size: 12px; line-height: 1.4; color: #ddd; margin-bottom: 8px; }
        .ai-impact { font-size: 11px; font-weight: 600; display: flex; justify-content: space-between; border-top: 1px solid #333; padding-top: 5px; }

        /* Card Content */
        .card-top { display: flex; justify-content: space-between; align-items: start; margin-bottom: 5px; }
        .icon-sq {
            width: 36px; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center;
            color: white; font-size: 18px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        
        .card-val { font-size: 28px; font-weight: 700; letter-spacing: -0.5px; margin-bottom: 2px; }
        .card-label { font-size: 13px; color: var(--text-secondary); font-weight: 500; }
        
        .source-link {
            font-size: 10px; color: var(--text-secondary);
            display: flex; align-items: center; gap: 3px; opacity: 0.6;
        }

        .chart-area { height: 40px; width: 100%; margin-top: auto; opacity: 0.8; }

        /* --- LOADING OVERLAY --- */
        .loading-overlay {
            display: flex; justify-content: center; align-items: center; gap: 10px;
            font-size: 14px; color: var(--text-secondary); height: 20px;
        }
        .spinner { width: 14px; height: 14px; border: 2px solid #555; border-top-color: var(--accent-blue); border-radius: 50%; animation: spin 1s infinite linear; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- FOOTER --- */
        .footer { text-align: center; margin-top: 60px; padding: 0 20px; }
        .legal-box {
            border: 1px solid var(--separator); background: rgba(255,255,255,0.03);
            padding: 20px; border-radius: 16px; text-align: left; font-size: 11px; color: var(--text-secondary);
            line-height: 1.6;
        }
        .legal-box strong { color: var(--accent-red); display: block; margin-bottom: 5px; }

        /* --- RESPONSIVE --- */
        @media (max-width: 1024px) { .widget-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 600px) { 
            .widget-grid { grid-template-columns: 1fr; } 
            .hero-grid { grid-template-columns: 1fr; }
            .card { height: auto; min-height: 180px; }
        }
    </style>
</head>
<body style="background-color: #000; color: #fff;">

<header>
    <div class="app-title">
        WARADAR <div class="live-badge"><span class="dot"></span>LIVE</div>
    </div>
    
    <div class="header-actions">
        <div class="lang-flags">
            <img src="https://flagcdn.com/w40/us.png" class="active" title="English">
            <img src="https://flagcdn.com/w40/il.png" title="Hebrew">
            <img src="https://flagcdn.com/w40/ru.png" title="Russian">
        </div>
        <a href="https://buymeacoffee.com/idanbit1" target="_blank" class="donate-btn">Donate</a>
    </div>
</header>

<div class="container">

    <div class="loading-overlay" id="loadingState">
        <div class="spinner"></div> Decrypting Satellite Streams...
    </div>
    <div style="text-align:center; font-size:12px; color:#555; margin-bottom:20px; display:none;" id="updateTime">
        Last Updated: --:--
    </div>

    <div class="hero-grid">
        <div class="hero-card">
            <div class="hero-label">US-Iran Escalation</div>
            <div class="ring-wrapper">
                <svg class="ring-svg">
                    <circle cx="65" cy="65" r="58" class="ring-bg"></circle>
                    <circle cx="65" cy="65" r="58" class="ring-val" id="ring1" stroke="#ff9f0a"></circle>
                </svg>
                <div class="ring-text" id="valUS">--</div>
            </div>
            <div class="hero-status" id="statUS" style="color:#888">Waiting...</div>
        </div>

        <div class="hero-card">
            <div class="hero-label">Israel Impact Risk</div>
            <div class="ring-wrapper">
                <svg class="ring-svg">
                    <circle cx="65" cy="65" r="58" class="ring-bg"></circle>
                    <circle cx="65" cy="65" r="58" class="ring-val" id="ring2" stroke="#ff453a"></circle>
                </svg>
                <div class="ring-text" id="valIL">--</div>
            </div>
            <div class="hero-status" id="statIL" style="color:#888">Waiting...</div>
        </div>
    </div>

    <div class="section-title">Live Intelligence & AI Analysis</div>
    
    <div class="widget-grid" id="gridContainer">
        </div>

    <div style="background:var(--card); border-radius:20px; padding:20px; margin-top:40px; text-align:center;">
        <div style="font-weight:600; margin-bottom:15px;">Did you find this intel helpful?</div>
        <div style="display:flex; justify-content:center; gap:30px; font-size:24px; cursor:pointer;">
            <i class="fas fa-thumbs-up" style="color:#555" onclick="this.style.color='#30d158'"></i>
            <i class="fas fa-thumbs-down" style="color:#555" onclick="this.style.color='#ff453a'"></i>
        </div>
        <div style="font-size:12px; color:#666; margin-top:10px;">25,357 Users voted</div>
    </div>

    <div class="footer">
        <div class="legal-box">
            <strong>⚠️ IMPORTANT LEGAL DISCLAIMER</strong>
            This website ("WARADAR") is an independent, open-source project. The data presented is aggregated from public OSINT sources.
            <br><br>
            <strong>NOT OFFICIAL INTELLIGENCE:</strong> This site DOES NOT display classified military intelligence or government secrets.
            <br><br>
            <strong>LIMITATION OF LIABILITY:</strong> The information presented should NEVER be used as a basis for military, defense, or financial decisions. Use at your own risk.
        </div>
        <div style="margin-top:20px; font-size:12px; color:#666;">
            Created by <a href="#">Idan Biton</a> | All Rights Reserved
        </div>
    </div>

</div>

<script>
    // --- 1. DATA CONFIGURATION & SOURCES ---
    const dataPoints = [
        {
            id: 'tanker', label: 'Mil. Tankers', icon: 'fa-jet-fighter', color: '#ff9f0a', 
            source: 'ADS-B Exch', url: 'https://globe.adsbexchange.com/',
            baseVal: 65,
            aiLogic: (val) => val > 70 ? "Unusual aerial refueling detected near strategic points. Indicates long-range readiness." : "Routine patrol patterns observed. No immediate strike formation."
        },
        {
            id: 'gps', label: 'GPS Jamming', icon: 'fa-map-marker-slash', color: '#ff453a', 
            source: 'GPSJam.org', url: 'https://gpsjam.org/',
            baseVal: 95,
            aiLogic: (val) => val > 90 ? "High-intensity interference in northern Israel. Defensive electronic warfare active." : "Localized GPS disruptions. Likely routine security measures."
        },
        {
            id: 'flight', label: 'Flight Cancels', icon: 'fa-plane-slash', color: '#0a84ff', 
            source: 'FlightAware', url: 'https://flightaware.com/live/airport/LLBG',
            baseVal: 30,
            aiLogic: (val) => val > 50 ? "Civilian airspace clearing. Major airlines suspending routes indicates imminent threat." : "Airspace traffic nominal. Standard commercial operations."
        },
        {
            id: 'pizza', label: 'Pentagon Pizza', icon: 'fa-pizza-slice', color: '#ffd60a', 
            source: 'Google Maps', url: '#',
            baseVal: 80,
            aiLogic: (val) => val > 75 ? "High volume orders at Pentagon. Staff working overtime suggests crisis planning." : "Normal staffing levels at DoD headquarters. No crisis indicators."
        },
        {
            id: 'market', label: 'Fear Index', icon: 'fa-chart-line', color: '#30d158', 
            source: 'Polymarket', url: 'https://polymarket.com/',
            baseVal: 20,
            aiLogic: (val) => val > 60 ? "Markets pricing in conflict. Spike in oil/gold suggests investor panic." : "Markets stable. Investors do not foresee immediate escalation."
        },
        {
            id: 'news', label: 'Sentiment', icon: 'fa-newspaper', color: '#5856d6', 
            source: 'GDELT', url: 'https://gdeltproject.org/',
            baseVal: 70,
            aiLogic: (val) => val > 65 ? "Negative sentiment spike in global media. Diplomatic channels failing." : "Mixed media reports. Diplomatic efforts visible."
        },
        {
            id: 'weather', label: 'Op. Weather', icon: 'fa-cloud', color: '#5ac8fa', 
            source: 'OpenMeteo', url: 'https://open-meteo.com/',
            baseVal: 85, // Clear sky
            aiLogic: (val) => val > 80 ? "Clear skies provide optimal conditions for aerial & satellite operations." : "Cloud cover limits optical surveillance and laser-guided munitions."
        },
        {
            id: 'wiki', label: 'Public Interest', icon: 'fa-search', color: '#8e8e93', 
            source: 'Wiki Trends', url: 'https://pageviews.wmcloud.org/',
            baseVal: 40,
            aiLogic: (val) => val > 70 ? "Mass public anxiety detected via search trends." : "Public interest within standard parameters."
        }
    ];

    // --- 2. GENERATE CARDS WITH AI TOOLTIPS ---
    function renderCards() {
        const grid = document.getElementById('gridContainer');
        grid.innerHTML = '';

        dataPoints.forEach(item => {
            // Simulate live fluctuation
            let currentVal = item.baseVal + Math.floor((Math.random() * 10) - 5);
            if(currentVal > 100) currentVal = 100;
            
            // Generate AI Text
            let aiText = item.aiLogic(currentVal);
            let impact = currentVal > 60 ? "High Risk Impact" : "Low Risk Impact";
            let impactColor = currentVal > 60 ? "#ff453a" : "#30d158";
            let valDisplay = (item.id === 'pizza' || item.id === 'news') ? (currentVal > 60 ? 'High' : 'Low') : currentVal + '%';

            let html = `
            <a href="${item.url}" target="_blank" class="card">
                <div class="ai-tooltip">
                    <div class="ai-header"><i class="fas fa-robot"></i> AI Analysis</div>
                    <div class="ai-text">${aiText}</div>
                    <div class="ai-impact">
                        <span>Escalation Factor:</span>
                        <span style="color:${impactColor}">${impact}</span>
                    </div>
                </div>

                <div class="card-top">
                    <div class="icon-sq" style="background:${item.color}"><i class="fas ${item.icon}"></i></div>
                    <div class="source-link">${item.source} <i class="fas fa-external-link-alt" style="font-size:8px"></i></div>
                </div>
                
                <div>
                    <div class="card-val" style="color:${currentVal > 80 ? '#ff453a' : '#fff'}">${valDisplay}</div>
                    <div class="card-label">${item.label}</div>
                    
                    <div class="ai-badge">
                        <i class="fas fa-brain"></i> AI Insight
                    </div>
                </div>
                
                <div class="chart-area"><canvas id="chart_${item.id}"></canvas></div>
            </a>
            `;
            grid.innerHTML += html;
        });

        // Initialize Charts after rendering
        setTimeout(initCharts, 100);
    }

    // --- 3. CHARTS LOGIC (72H Linear) ---
    function initCharts() {
        Chart.defaults.scale.grid.display = false;
        Chart.defaults.scale.ticks.display = false;
        
        dataPoints.forEach(item => {
            const ctx = document.getElementById(`chart_${item.id}`);
            if(!ctx) return;
            
            // Mock 72h data
            let data = [];
            let val = item.baseVal;
            for(let i=0; i<72; i++) {
                val += (Math.random() - 0.5) * 8;
                if(val<10) val=10; if(val>95) val=95;
                data.push(val);
            }

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array(72).fill(''),
                    datasets: [{
                        data: data,
                        borderColor: item.color,
                        borderWidth: 2,
                        pointRadius: 0,
                        tension: 0, // Straight lines
                        fill: false
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: {display:false}, tooltip: {enabled:false} }, // Tooltip is handled by AI box
                    scales: { x: {display:false}, y: {display:false} }
                }
            });
        });
    }

    // --- 4. RISK CALCULATION ---
    function updateRiskGauges() {
        // Simple weighted logic
        let p = {};
        dataPoints.forEach(d => p[d.id] = d.baseVal);
        
        const usRisk = Math.floor((p.tanker * 0.4) + (p.market * 0.2) + (p.news * 0.2) + (p.pizza * 0.2));
        const ilRisk = Math.floor((p.gps * 0.5) + (p.flight * 0.3) + (usRisk * 0.2));

        setRing('ring1', 'valUS', 'statUS', usRisk);
        setRing('ring2', 'valIL', 'statIL', ilRisk);
    }

    function setRing(ringId, valId, statId, val) {
        document.getElementById(valId).innerText = val + "%";
        const offset = 377 - (377 * val) / 100;
        document.getElementById(ringId).style.strokeDashoffset = offset;
        
        let color = '#30d158'; let stat = "Routine";
        if(val > 40) { color = '#ffd60a'; stat = "Elevated"; }
        if(val > 70) { color = '#ff9f0a'; stat = "High Tension"; }
        if(val > 85) { color = '#ff453a'; stat = "Critical"; }
        
        document.getElementById(ringId).style.stroke = color;
        const statEl = document.getElementById(statId);
        statEl.innerText = stat; statEl.style.color = color;
    }

    // --- 5. INIT & SIMULATION ---
    // Start Loading
    setTimeout(() => {
        document.getElementById('loadingState').style.display = 'none';
        document.getElementById('updateTime').style.display = 'block';
        document.getElementById('updateTime').innerText = "Last Updated: " + new Date().toLocaleTimeString();
        
        renderCards();
        updateRiskGauges();
    }, 2000); // 2 second mock loading

</script>
</body>
</html>

